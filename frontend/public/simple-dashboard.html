<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø³ÙƒÙ† - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            direction: rtl;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stat-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .data-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .data-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        table th {
            padding: 15px;
            text-align: right;
            font-weight: 600;
        }
        
        table td {
            padding: 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        table tbody tr:hover {
            background: #f8f9fa;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 1.5rem;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: transform 0.3s;
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .badge.active {
            background: #d4edda;
            color: #155724;
        }
        
        .badge.inactive {
            background: #f8d7da;
            color: #721c24;
        }
        
        .badge.occupied {
            background: #d4edda;
            color: #155724;
        }
        
        .badge.vacant {
            background: #fff3cd;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¢ Ù†Ø¸Ø§Ù… Ø³ÙƒÙ† Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</h1>
            <p>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
        </header>
        
        <div id="loading" class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
        
        <div id="stats" class="stats-grid" style="display: none;"></div>
        
        <div class="data-section" style="display: none;" id="buildingsSection">
            <h2>ğŸ¢ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ</h2>
            <table id="buildingsTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰</th>
                        <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                        <th>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th>
                        <th>Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚</th>
                        <th>Ø§Ù„ÙˆØ­Ø¯Ø§Øª</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        
        <div class="data-section" style="display: none;" id="ownersSection">
            <h2>ğŸ‘¤ Ø§Ù„Ù…Ù„Ø§Ùƒ</h2>
            <table id="ownersTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                        <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                        <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
                        <th>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        
        <div class="data-section" style="display: none;" id="tenantsSection">
            <h2>ğŸ¤ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†</h2>
            <table id="tenantsTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                        <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                        <th>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ</th>
                        <th>Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯</th>
                        <th>Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    
    <script>
        const API_URL = 'http://localhost:5000';
        
        async function loadData() {
            try {
                const [buildings, units, owners, tenants, invoices] = await Promise.all([
                    fetch(`${API_URL}/buildings`).then(r => r.json()),
                    fetch(`${API_URL}/units`).then(r => r.json()),
                    fetch(`${API_URL}/owners`).then(r => r.json()),
                    fetch(`${API_URL}/tenants`).then(r => r.json()),
                    fetch(`${API_URL}/invoices`).then(r => r.json())
                ]);
                
                displayStats(buildings, units, owners, tenants, invoices);
                displayBuildings(buildings);
                displayOwners(owners);
                displayTenants(tenants);
                
                document.getElementById('loading').style.display = 'none';
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('loading').innerHTML = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¹Ù„Ù‰ http://localhost:5000';
            }
        }
        
        function displayStats(buildings, units, owners, tenants, invoices) {
            const occupiedUnits = units.filter(u => u.status === 'occupied').length;
            const vacantUnits = units.filter(u => u.status === 'vacant').length;
            const totalRent = units.reduce((sum, u) => sum + (u.monthly_rent || 0), 0);
            const pendingInvoices = invoices.filter(i => i.status === 'pending').length;
            
            const statsHTML = `
                <div class="stat-card">
                    <div class="stat-icon">ğŸ¢</div>
                    <div class="stat-number">${buildings.length}</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ </div>
                    <div class="stat-number">${units.length}</div>
                    <div class="stat-label">Ø§Ù„ÙˆØ­Ø¯Ø§Øª</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ‘¤</div>
                    <div class="stat-number">${owners.length}</div>
                    <div class="stat-label">Ø§Ù„Ù…Ù„Ø§Ùƒ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ¤</div>
                    <div class="stat-number">${tenants.length}</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-number">${occupiedUnits}</div>
                    <div class="stat-label">ÙˆØ­Ø¯Ø§Øª Ù…Ø¤Ø¬Ø±Ø©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">âš ï¸</div>
                    <div class="stat-number">${vacantUnits}</div>
                    <div class="stat-label">ÙˆØ­Ø¯Ø§Øª Ø´Ø§ØºØ±Ø©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ’°</div>
                    <div class="stat-number">${totalRent.toLocaleString()}</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±Ø§Øª</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“„</div>
                    <div class="stat-number">${pendingInvoices}</div>
                    <div class="stat-label">ÙÙˆØ§ØªÙŠØ± Ù…Ø¹Ù„Ù‚Ø©</div>
                </div>
            `;
            
            document.getElementById('stats').innerHTML = statsHTML;
            document.getElementById('stats').style.display = 'grid';
        }
        
        function displayBuildings(buildings) {
            const tbody = document.getElementById('buildingsTable').querySelector('tbody');
            tbody.innerHTML = buildings.map(b => `
                <tr>
                    <td>${b.id}</td>
                    <td>${b.name}</td>
                    <td>${b.address}</td>
                    <td>${b.city}</td>
                    <td>${b.floors || '-'}</td>
                    <td>${b.units_count}</td>
                    <td><span class="badge ${b.status}">${b.status === 'active' ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·'}</span></td>
                </tr>
            `).join('');
            document.getElementById('buildingsSection').style.display = 'block';
        }
        
        function displayOwners(owners) {
            const tbody = document.getElementById('ownersTable').querySelector('tbody');
            tbody.innerHTML = owners.map(o => `
                <tr>
                    <td>${o.id}</td>
                    <td>${o.name}</td>
                    <td>${o.owner_type === 'individual' ? 'ÙØ±Ø¯' : 'Ø´Ø±ÙƒØ©'}</td>
                    <td>${o.phone}</td>
                    <td>${o.email || '-'}</td>
                    <td>${o.city}</td>
                    <td><span class="badge ${o.status}">${o.status === 'active' ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·'}</span></td>
                </tr>
            `).join('');
            document.getElementById('ownersSection').style.display = 'block';
        }
        
        function displayTenants(tenants) {
            const tbody = document.getElementById('tenantsTable').querySelector('tbody');
            tbody.innerHTML = tenants.map(t => `
                <tr>
                    <td>${t.id}</td>
                    <td>${t.name}</td>
                    <td>${t.phone}</td>
                    <td>#${t.unit_id}</td>
                    <td>${t.monthly_rent.toLocaleString()} Ø¬Ù†ÙŠÙ‡</td>
                    <td>${t.contract_start_date}</td>
                    <td>${t.contract_end_date}</td>
                    <td><span class="badge ${t.status}">${t.status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…Ù†ØªÙ‡ÙŠ'}</span></td>
                </tr>
            `).join('');
            document.getElementById('tenantsSection').style.display = 'block';
        }
        
        // Load data on page load
        loadData();
    </script>
</body>
</html>
